{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dropdown = exports.DraggableAttribute = undefined;\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _react = require('react');\nvar _react2 = _interopRequireDefault(_react);\nvar _propTypes = require('prop-types');\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar _immutabilityHelper = require('immutability-helper');\nvar _immutabilityHelper2 = _interopRequireDefault(_immutabilityHelper);\nvar _Utilities = require('./Utilities');\nvar _PivotTable = require('./PivotTable');\nvar _PivotTable2 = _interopRequireDefault(_PivotTable);\nvar _reactSortablejs = require('react-sortablejs');\nvar _reactSortablejs2 = _interopRequireDefault(_reactSortablejs);\nvar _reactDraggable = require('react-draggable');\nvar _reactDraggable2 = _interopRequireDefault(_reactDraggable);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\n/* eslint-disable react/prop-types */\n// eslint can't see inherited propTypes!\n\nvar DraggableAttribute = exports.DraggableAttribute = function (_React$Component) {\n  _inherits(DraggableAttribute, _React$Component);\n  function DraggableAttribute(props) {\n    _classCallCheck(this, DraggableAttribute);\n    var _this = _possibleConstructorReturn(this, (DraggableAttribute.__proto__ || Object.getPrototypeOf(DraggableAttribute)).call(this, props));\n    _this.state = {\n      open: false,\n      filterText: ''\n    };\n    return _this;\n  }\n  _createClass(DraggableAttribute, [{\n    key: 'toggleValue',\n    value: function toggleValue(value) {\n      if (value in this.props.valueFilter) {\n        this.props.removeValuesFromFilter(this.props.name, [value]);\n      } else {\n        this.props.addValuesToFilter(this.props.name, [value]);\n      }\n    }\n  }, {\n    key: 'matchesFilter',\n    value: function matchesFilter(x) {\n      return x.toLowerCase().trim().includes(this.state.filterText.toLowerCase().trim());\n    }\n  }, {\n    key: 'selectOnly',\n    value: function selectOnly(e, value) {\n      e.stopPropagation();\n      this.props.setValuesInFilter(this.props.name, Object.keys(this.props.attrValues).filter(function (y) {\n        return y !== value;\n      }));\n    }\n  }, {\n    key: 'getFilterBox',\n    value: function getFilterBox() {\n      var _this2 = this;\n      var showMenu = Object.keys(this.props.attrValues).length < this.props.menuLimit;\n      var values = Object.keys(this.props.attrValues);\n      var shown = values.filter(this.matchesFilter.bind(this)).sort(this.props.sorter);\n      return _react2.default.createElement(_reactDraggable2.default, {\n        handle: '.pvtDragHandle'\n      }, _react2.default.createElement('div', {\n        className: 'pvtFilterBox',\n        style: {\n          display: 'block',\n          cursor: 'initial',\n          zIndex: this.props.zIndex\n        },\n        onClick: function onClick() {\n          return _this2.props.moveFilterBoxToTop(_this2.props.name);\n        }\n      }, _react2.default.createElement('a', {\n        onClick: function onClick() {\n          return _this2.setState({\n            open: false\n          });\n        },\n        className: 'pvtCloseX'\n      }, '\\xD7'), _react2.default.createElement('span', {\n        className: 'pvtDragHandle'\n      }, '\\u2630'), _react2.default.createElement('h4', null, this.props.name), showMenu || _react2.default.createElement('p', null, '(too many values to show)'), showMenu && _react2.default.createElement('p', null, _react2.default.createElement('input', {\n        type: 'text',\n        placeholder: 'Filter values',\n        className: 'pvtSearch',\n        value: this.state.filterText,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            filterText: e.target.value\n          });\n        }\n      }), _react2.default.createElement('br', null), _react2.default.createElement('a', {\n        role: 'button',\n        className: 'pvtButton',\n        onClick: function onClick() {\n          return _this2.props.removeValuesFromFilter(_this2.props.name, Object.keys(_this2.props.attrValues).filter(_this2.matchesFilter.bind(_this2)));\n        }\n      }, 'Select ', values.length === shown.length ? 'All' : shown.length), ' ', _react2.default.createElement('a', {\n        role: 'button',\n        className: 'pvtButton',\n        onClick: function onClick() {\n          return _this2.props.addValuesToFilter(_this2.props.name, Object.keys(_this2.props.attrValues).filter(_this2.matchesFilter.bind(_this2)));\n        }\n      }, 'Deselect ', values.length === shown.length ? 'All' : shown.length)), showMenu && _react2.default.createElement('div', {\n        className: 'pvtCheckContainer'\n      }, shown.map(function (x) {\n        return _react2.default.createElement('p', {\n          key: x,\n          onClick: function onClick() {\n            return _this2.toggleValue(x);\n          },\n          className: x in _this2.props.valueFilter ? '' : 'selected'\n        }, _react2.default.createElement('a', {\n          className: 'pvtOnly',\n          onClick: function onClick(e) {\n            return _this2.selectOnly(e, x);\n          }\n        }, 'only'), _react2.default.createElement('a', {\n          className: 'pvtOnlySpacer'\n        }, '\\xA0'), x === '' ? _react2.default.createElement('em', null, 'null') : x);\n      }))));\n    }\n  }, {\n    key: 'toggleFilterBox',\n    value: function toggleFilterBox() {\n      this.setState({\n        open: !this.state.open\n      });\n      this.props.moveFilterBoxToTop(this.props.name);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var filtered = Object.keys(this.props.valueFilter).length !== 0 ? 'pvtFilteredAttribute' : '';\n      return _react2.default.createElement('li', {\n        'data-id': this.props.name\n      }, _react2.default.createElement('span', {\n        className: 'pvtAttr ' + filtered\n      }, this.props.name, _react2.default.createElement('span', {\n        className: 'pvtTriangle',\n        onClick: this.toggleFilterBox.bind(this)\n      }, ' ', '\\u25BE')), this.state.open ? this.getFilterBox() : null);\n    }\n  }]);\n  return DraggableAttribute;\n}(_react2.default.Component);\nDraggableAttribute.defaultProps = {\n  valueFilter: {}\n};\nDraggableAttribute.propTypes = {\n  name: _propTypes2.default.string.isRequired,\n  addValuesToFilter: _propTypes2.default.func.isRequired,\n  removeValuesFromFilter: _propTypes2.default.func.isRequired,\n  attrValues: _propTypes2.default.objectOf(_propTypes2.default.number).isRequired,\n  valueFilter: _propTypes2.default.objectOf(_propTypes2.default.bool),\n  moveFilterBoxToTop: _propTypes2.default.func.isRequired,\n  sorter: _propTypes2.default.func.isRequired,\n  menuLimit: _propTypes2.default.number,\n  zIndex: _propTypes2.default.number\n};\nvar Dropdown = exports.Dropdown = function (_React$PureComponent) {\n  _inherits(Dropdown, _React$PureComponent);\n  function Dropdown() {\n    _classCallCheck(this, Dropdown);\n    return _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).apply(this, arguments));\n  }\n  _createClass(Dropdown, [{\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n      return _react2.default.createElement('div', {\n        className: 'pvtDropdown',\n        style: {\n          zIndex: this.props.zIndex\n        }\n      }, _react2.default.createElement('div', {\n        onClick: function onClick(e) {\n          e.stopPropagation();\n          _this4.props.toggle();\n        },\n        className: 'pvtDropdownValue pvtDropdownCurrent ' + (this.props.open ? 'pvtDropdownCurrentOpen' : ''),\n        role: 'button'\n      }, _react2.default.createElement('div', {\n        className: 'pvtDropdownIcon'\n      }, this.props.open ? '×' : '▾'), this.props.current || _react2.default.createElement('span', null, '\\xA0')), this.props.open && _react2.default.createElement('div', {\n        className: 'pvtDropdownMenu'\n      }, this.props.values.map(function (r) {\n        return _react2.default.createElement('div', {\n          key: r,\n          role: 'button',\n          onClick: function onClick(e) {\n            e.stopPropagation();\n            if (_this4.props.current === r) {\n              _this4.props.toggle();\n            } else {\n              _this4.props.setValue(r);\n            }\n          },\n          className: 'pvtDropdownValue ' + (r === _this4.props.current ? 'pvtDropdownActiveValue' : '')\n        }, r);\n      })));\n    }\n  }]);\n  return Dropdown;\n}(_react2.default.PureComponent);\nvar PivotTableUI = function (_React$PureComponent2) {\n  _inherits(PivotTableUI, _React$PureComponent2);\n  function PivotTableUI(props) {\n    _classCallCheck(this, PivotTableUI);\n    var _this5 = _possibleConstructorReturn(this, (PivotTableUI.__proto__ || Object.getPrototypeOf(PivotTableUI)).call(this, props));\n    _this5.state = {\n      unusedOrder: [],\n      zIndices: {},\n      maxZIndex: 1000,\n      openDropdown: false,\n      attrValues: {},\n      materializedInput: []\n    };\n    return _this5;\n  }\n  _createClass(PivotTableUI, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.materializeInput(this.props.data);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.materializeInput(this.props.data);\n    }\n  }, {\n    key: 'materializeInput',\n    value: function materializeInput(nextData) {\n      if (this.state.data === nextData) {\n        return;\n      }\n      var newState = {\n        data: nextData,\n        attrValues: {},\n        materializedInput: []\n      };\n      var recordsProcessed = 0;\n      _Utilities.PivotData.forEachRecord(newState.data, this.props.derivedAttributes, function (record) {\n        newState.materializedInput.push(record);\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n        try {\n          for (var _iterator = Object.keys(record)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var attr = _step.value;\n            if (!(attr in newState.attrValues)) {\n              newState.attrValues[attr] = {};\n              if (recordsProcessed > 0) {\n                newState.attrValues[attr].null = recordsProcessed;\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n        for (var _attr in newState.attrValues) {\n          var value = _attr in record ? record[_attr] : 'null';\n          if (!(value in newState.attrValues[_attr])) {\n            newState.attrValues[_attr][value] = 0;\n          }\n          newState.attrValues[_attr][value]++;\n        }\n        recordsProcessed++;\n      });\n      this.setState(newState);\n    }\n  }, {\n    key: 'sendPropUpdate',\n    value: function sendPropUpdate(command) {\n      this.props.onChange((0, _immutabilityHelper2.default)(this.props, command));\n    }\n  }, {\n    key: 'propUpdater',\n    value: function propUpdater(key) {\n      var _this6 = this;\n      return function (value) {\n        return _this6.sendPropUpdate(_defineProperty({}, key, {\n          $set: value\n        }));\n      };\n    }\n  }, {\n    key: 'setValuesInFilter',\n    value: function setValuesInFilter(attribute, values) {\n      this.sendPropUpdate({\n        valueFilter: _defineProperty({}, attribute, {\n          $set: values.reduce(function (r, v) {\n            r[v] = true;\n            return r;\n          }, {})\n        })\n      });\n    }\n  }, {\n    key: 'addValuesToFilter',\n    value: function addValuesToFilter(attribute, values) {\n      if (attribute in this.props.valueFilter) {\n        this.sendPropUpdate({\n          valueFilter: _defineProperty({}, attribute, values.reduce(function (r, v) {\n            r[v] = {\n              $set: true\n            };\n            return r;\n          }, {}))\n        });\n      } else {\n        this.setValuesInFilter(attribute, values);\n      }\n    }\n  }, {\n    key: 'removeValuesFromFilter',\n    value: function removeValuesFromFilter(attribute, values) {\n      this.sendPropUpdate({\n        valueFilter: _defineProperty({}, attribute, {\n          $unset: values\n        })\n      });\n    }\n  }, {\n    key: 'moveFilterBoxToTop',\n    value: function moveFilterBoxToTop(attribute) {\n      this.setState((0, _immutabilityHelper2.default)(this.state, {\n        maxZIndex: {\n          $set: this.state.maxZIndex + 1\n        },\n        zIndices: _defineProperty({}, attribute, {\n          $set: this.state.maxZIndex + 1\n        })\n      }));\n    }\n  }, {\n    key: 'isOpen',\n    value: function isOpen(dropdown) {\n      return this.state.openDropdown === dropdown;\n    }\n  }, {\n    key: 'makeDnDCell',\n    value: function makeDnDCell(items, onChange, classes) {\n      var _this7 = this;\n      return _react2.default.createElement(_reactSortablejs2.default, {\n        options: {\n          group: 'shared',\n          ghostClass: 'pvtPlaceholder',\n          filter: '.pvtFilterBox',\n          preventOnFilter: false\n        },\n        tag: 'td',\n        className: classes,\n        onChange: onChange\n      }, items.map(function (x) {\n        return _react2.default.createElement(DraggableAttribute, {\n          name: x,\n          key: x,\n          attrValues: _this7.state.attrValues[x],\n          valueFilter: _this7.props.valueFilter[x] || {},\n          sorter: (0, _Utilities.getSort)(_this7.props.sorters, x),\n          menuLimit: _this7.props.menuLimit,\n          setValuesInFilter: _this7.setValuesInFilter.bind(_this7),\n          addValuesToFilter: _this7.addValuesToFilter.bind(_this7),\n          moveFilterBoxToTop: _this7.moveFilterBoxToTop.bind(_this7),\n          removeValuesFromFilter: _this7.removeValuesFromFilter.bind(_this7),\n          zIndex: _this7.state.zIndices[x] || _this7.state.maxZIndex\n        });\n      }));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this8 = this;\n      var numValsAllowed = this.props.aggregators[this.props.aggregatorName]([])().numInputs || 0;\n      var aggregatorCellOutlet = this.props.aggregators[this.props.aggregatorName]([])().outlet;\n      var rendererName = this.props.rendererName in this.props.renderers ? this.props.rendererName : Object.keys(this.props.renderers)[0];\n      var rendererCell = _react2.default.createElement('td', {\n        className: 'pvtRenderers'\n      }, _react2.default.createElement(Dropdown, {\n        current: rendererName,\n        values: Object.keys(this.props.renderers),\n        open: this.isOpen('renderer'),\n        zIndex: this.isOpen('renderer') ? this.state.maxZIndex + 1 : 1,\n        toggle: function toggle() {\n          return _this8.setState({\n            openDropdown: _this8.isOpen('renderer') ? false : 'renderer'\n          });\n        },\n        setValue: this.propUpdater('rendererName')\n      }));\n      var sortIcons = {\n        key_a_to_z: {\n          rowSymbol: '↕',\n          colSymbol: '↔',\n          next: 'value_a_to_z'\n        },\n        value_a_to_z: {\n          rowSymbol: '↓',\n          colSymbol: '→',\n          next: 'value_z_to_a'\n        },\n        value_z_to_a: {\n          rowSymbol: '↑',\n          colSymbol: '←',\n          next: 'key_a_to_z'\n        }\n      };\n      var aggregatorCell = _react2.default.createElement('td', {\n        className: 'pvtVals'\n      }, _react2.default.createElement(Dropdown, {\n        current: this.props.aggregatorName,\n        values: Object.keys(this.props.aggregators),\n        open: this.isOpen('aggregators'),\n        zIndex: this.isOpen('aggregators') ? this.state.maxZIndex + 1 : 1,\n        toggle: function toggle() {\n          return _this8.setState({\n            openDropdown: _this8.isOpen('aggregators') ? false : 'aggregators'\n          });\n        },\n        setValue: this.propUpdater('aggregatorName')\n      }), _react2.default.createElement('a', {\n        role: 'button',\n        className: 'pvtRowOrder',\n        onClick: function onClick() {\n          return _this8.propUpdater('rowOrder')(sortIcons[_this8.props.rowOrder].next);\n        }\n      }, sortIcons[this.props.rowOrder].rowSymbol), _react2.default.createElement('a', {\n        role: 'button',\n        className: 'pvtColOrder',\n        onClick: function onClick() {\n          return _this8.propUpdater('colOrder')(sortIcons[_this8.props.colOrder].next);\n        }\n      }, sortIcons[this.props.colOrder].colSymbol), numValsAllowed > 0 && _react2.default.createElement('br', null), new Array(numValsAllowed).fill().map(function (n, i) {\n        return [_react2.default.createElement(Dropdown, {\n          key: i,\n          current: _this8.props.vals[i],\n          values: Object.keys(_this8.state.attrValues).filter(function (e) {\n            return !_this8.props.hiddenAttributes.includes(e) && !_this8.props.hiddenFromAggregators.includes(e);\n          }),\n          open: _this8.isOpen('val' + i),\n          zIndex: _this8.isOpen('val' + i) ? _this8.state.maxZIndex + 1 : 1,\n          toggle: function toggle() {\n            return _this8.setState({\n              openDropdown: _this8.isOpen('val' + i) ? false : 'val' + i\n            });\n          },\n          setValue: function setValue(value) {\n            return _this8.sendPropUpdate({\n              vals: {\n                $splice: [[i, 1, value]]\n              }\n            });\n          }\n        }), i + 1 !== numValsAllowed ? _react2.default.createElement('br', {\n          key: 'br' + i\n        }) : null];\n      }), aggregatorCellOutlet && aggregatorCellOutlet(this.props.data));\n      var unusedAttrs = Object.keys(this.state.attrValues).filter(function (e) {\n        return !_this8.props.rows.includes(e) && !_this8.props.cols.includes(e) && !_this8.props.hiddenAttributes.includes(e) && !_this8.props.hiddenFromDragDrop.includes(e);\n      }).sort((0, _Utilities.sortAs)(this.state.unusedOrder));\n      var unusedLength = unusedAttrs.reduce(function (r, e) {\n        return r + e.length;\n      }, 0);\n      var horizUnused = unusedLength < this.props.unusedOrientationCutoff;\n      var unusedAttrsCell = this.makeDnDCell(unusedAttrs, function (order) {\n        return _this8.setState({\n          unusedOrder: order\n        });\n      }, 'pvtAxisContainer pvtUnused ' + (horizUnused ? 'pvtHorizList' : 'pvtVertList'));\n      var colAttrs = this.props.cols.filter(function (e) {\n        return !_this8.props.hiddenAttributes.includes(e) && !_this8.props.hiddenFromDragDrop.includes(e);\n      });\n      var colAttrsCell = this.makeDnDCell(colAttrs, this.propUpdater('cols'), 'pvtAxisContainer pvtHorizList pvtCols');\n      var rowAttrs = this.props.rows.filter(function (e) {\n        return !_this8.props.hiddenAttributes.includes(e) && !_this8.props.hiddenFromDragDrop.includes(e);\n      });\n      var rowAttrsCell = this.makeDnDCell(rowAttrs, this.propUpdater('rows'), 'pvtAxisContainer pvtVertList pvtRows');\n      var outputCell = _react2.default.createElement('td', {\n        className: 'pvtOutput'\n      }, _react2.default.createElement(_PivotTable2.default, (0, _immutabilityHelper2.default)(this.props, {\n        data: {\n          $set: this.state.materializedInput\n        }\n      })));\n      if (horizUnused) {\n        return _react2.default.createElement('table', {\n          className: 'pvtUi'\n        }, _react2.default.createElement('tbody', {\n          onClick: function onClick() {\n            return _this8.setState({\n              openDropdown: false\n            });\n          }\n        }, _react2.default.createElement('tr', null, rendererCell, unusedAttrsCell), _react2.default.createElement('tr', null, aggregatorCell, colAttrsCell), _react2.default.createElement('tr', null, rowAttrsCell, outputCell)));\n      }\n      return _react2.default.createElement('table', {\n        className: 'pvtUi'\n      }, _react2.default.createElement('tbody', {\n        onClick: function onClick() {\n          return _this8.setState({\n            openDropdown: false\n          });\n        }\n      }, _react2.default.createElement('tr', null, rendererCell, aggregatorCell, colAttrsCell), _react2.default.createElement('tr', null, unusedAttrsCell, rowAttrsCell, outputCell)));\n    }\n  }]);\n  return PivotTableUI;\n}(_react2.default.PureComponent);\nPivotTableUI.propTypes = Object.assign({}, _PivotTable2.default.propTypes, {\n  onChange: _propTypes2.default.func.isRequired,\n  hiddenAttributes: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  hiddenFromAggregators: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  hiddenFromDragDrop: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  unusedOrientationCutoff: _propTypes2.default.number,\n  menuLimit: _propTypes2.default.number\n});\nPivotTableUI.defaultProps = Object.assign({}, _PivotTable2.default.defaultProps, {\n  hiddenAttributes: [],\n  hiddenFromAggregators: [],\n  hiddenFromDragDrop: [],\n  unusedOrientationCutoff: 85,\n  menuLimit: 500\n});\nexports.default = PivotTableUI;","map":{"version":3,"names":["_react","require","_propTypes","_immutabilityHelper","_Utilities","_PivotTable","_reactSortablejs","_reactDraggable","DraggableAttribute","props","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","open","filterText","value","valueFilter","removeValuesFromFilter","name","addValuesToFilter","x","toLowerCase","trim","includes","e","stopPropagation","setValuesInFilter","keys","attrValues","filter","y","_this2","showMenu","length","menuLimit","values","shown","matchesFilter","bind","sort","sorter","_react2","default","createElement","_reactDraggable2","handle","className","style","display","cursor","zIndex","onClick","moveFilterBoxToTop","setState","type","placeholder","onChange","target","role","map","key","toggleValue","selectOnly","filtered","toggleFilterBox","getFilterBox","Component","defaultProps","propTypes","_propTypes2","string","isRequired","func","objectOf","number","bool","Dropdown","_this4","toggle","current","r","setValue","PureComponent","PivotTableUI","_this5","unusedOrder","zIndices","maxZIndex","openDropdown","materializedInput","materializeInput","data","nextData","newState","recordsProcessed","PivotData","forEachRecord","derivedAttributes","record","push","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","attr","null","err","return","_attr","command","_immutabilityHelper2","_this6","sendPropUpdate","_defineProperty","$set","attribute","reduce","v","$unset","dropdown","items","classes","_this7","_reactSortablejs2","options","group","ghostClass","preventOnFilter","tag","getSort","sorters","_this8","numValsAllowed","aggregators","aggregatorName","numInputs","aggregatorCellOutlet","outlet","rendererName","renderers","rendererCell","isOpen","propUpdater","sortIcons","key_a_to_z","rowSymbol","colSymbol","value_a_to_z","value_z_to_a","aggregatorCell","rowOrder","colOrder","Array","fill","n","i","vals","hiddenAttributes","hiddenFromAggregators","$splice","unusedAttrs","rows","cols","hiddenFromDragDrop","sortAs","unusedLength","horizUnused","unusedOrientationCutoff","unusedAttrsCell","makeDnDCell","order","colAttrs","colAttrsCell","rowAttrs","rowAttrsCell","outputCell","_PivotTable2","assign","arrayOf"],"sources":["D:\\Development\\React Project\\Excel Web App\\excelwebapp\\node_modules\\react-pivottable\\src\\PivotTableUI.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport {PivotData, sortAs, getSort} from './Utilities';\nimport PivotTable from './PivotTable';\nimport Sortable from 'react-sortablejs';\nimport Draggable from 'react-draggable';\n\n/* eslint-disable react/prop-types */\n// eslint can't see inherited propTypes!\n\nexport class DraggableAttribute extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {open: false, filterText: ''};\n  }\n\n  toggleValue(value) {\n    if (value in this.props.valueFilter) {\n      this.props.removeValuesFromFilter(this.props.name, [value]);\n    } else {\n      this.props.addValuesToFilter(this.props.name, [value]);\n    }\n  }\n\n  matchesFilter(x) {\n    return x\n      .toLowerCase()\n      .trim()\n      .includes(this.state.filterText.toLowerCase().trim());\n  }\n\n  selectOnly(e, value) {\n    e.stopPropagation();\n    this.props.setValuesInFilter(\n      this.props.name,\n      Object.keys(this.props.attrValues).filter(y => y !== value)\n    );\n  }\n\n  getFilterBox() {\n    const showMenu =\n      Object.keys(this.props.attrValues).length < this.props.menuLimit;\n\n    const values = Object.keys(this.props.attrValues);\n    const shown = values\n      .filter(this.matchesFilter.bind(this))\n      .sort(this.props.sorter);\n\n    return (\n      <Draggable handle=\".pvtDragHandle\">\n        <div\n          className=\"pvtFilterBox\"\n          style={{\n            display: 'block',\n            cursor: 'initial',\n            zIndex: this.props.zIndex,\n          }}\n          onClick={() => this.props.moveFilterBoxToTop(this.props.name)}\n        >\n          <a onClick={() => this.setState({open: false})} className=\"pvtCloseX\">\n            ×\n          </a>\n          <span className=\"pvtDragHandle\">☰</span>\n          <h4>{this.props.name}</h4>\n\n          {showMenu || <p>(too many values to show)</p>}\n\n          {showMenu && (\n            <p>\n              <input\n                type=\"text\"\n                placeholder=\"Filter values\"\n                className=\"pvtSearch\"\n                value={this.state.filterText}\n                onChange={e =>\n                  this.setState({\n                    filterText: e.target.value,\n                  })\n                }\n              />\n              <br />\n              <a\n                role=\"button\"\n                className=\"pvtButton\"\n                onClick={() =>\n                  this.props.removeValuesFromFilter(\n                    this.props.name,\n                    Object.keys(this.props.attrValues).filter(\n                      this.matchesFilter.bind(this)\n                    )\n                  )\n                }\n              >\n                Select {values.length === shown.length ? 'All' : shown.length}\n              </a>{' '}\n              <a\n                role=\"button\"\n                className=\"pvtButton\"\n                onClick={() =>\n                  this.props.addValuesToFilter(\n                    this.props.name,\n                    Object.keys(this.props.attrValues).filter(\n                      this.matchesFilter.bind(this)\n                    )\n                  )\n                }\n              >\n                Deselect {values.length === shown.length ? 'All' : shown.length}\n              </a>\n            </p>\n          )}\n\n          {showMenu && (\n            <div className=\"pvtCheckContainer\">\n              {shown.map(x => (\n                <p\n                  key={x}\n                  onClick={() => this.toggleValue(x)}\n                  className={x in this.props.valueFilter ? '' : 'selected'}\n                >\n                  <a className=\"pvtOnly\" onClick={e => this.selectOnly(e, x)}>\n                    only\n                  </a>\n                  <a className=\"pvtOnlySpacer\">&nbsp;</a>\n\n                  {x === '' ? <em>null</em> : x}\n                </p>\n              ))}\n            </div>\n          )}\n        </div>\n      </Draggable>\n    );\n  }\n\n  toggleFilterBox() {\n    this.setState({open: !this.state.open});\n    this.props.moveFilterBoxToTop(this.props.name);\n  }\n\n  render() {\n    const filtered =\n      Object.keys(this.props.valueFilter).length !== 0\n        ? 'pvtFilteredAttribute'\n        : '';\n    return (\n      <li data-id={this.props.name}>\n        <span className={'pvtAttr ' + filtered}>\n          {this.props.name}\n          <span\n            className=\"pvtTriangle\"\n            onClick={this.toggleFilterBox.bind(this)}\n          >\n            {' '}\n            ▾\n          </span>\n        </span>\n\n        {this.state.open ? this.getFilterBox() : null}\n      </li>\n    );\n  }\n}\n\nDraggableAttribute.defaultProps = {\n  valueFilter: {},\n};\n\nDraggableAttribute.propTypes = {\n  name: PropTypes.string.isRequired,\n  addValuesToFilter: PropTypes.func.isRequired,\n  removeValuesFromFilter: PropTypes.func.isRequired,\n  attrValues: PropTypes.objectOf(PropTypes.number).isRequired,\n  valueFilter: PropTypes.objectOf(PropTypes.bool),\n  moveFilterBoxToTop: PropTypes.func.isRequired,\n  sorter: PropTypes.func.isRequired,\n  menuLimit: PropTypes.number,\n  zIndex: PropTypes.number,\n};\n\nexport class Dropdown extends React.PureComponent {\n  render() {\n    return (\n      <div className=\"pvtDropdown\" style={{zIndex: this.props.zIndex}}>\n        <div\n          onClick={e => {\n            e.stopPropagation();\n            this.props.toggle();\n          }}\n          className={\n            'pvtDropdownValue pvtDropdownCurrent ' +\n            (this.props.open ? 'pvtDropdownCurrentOpen' : '')\n          }\n          role=\"button\"\n        >\n          <div className=\"pvtDropdownIcon\">{this.props.open ? '×' : '▾'}</div>\n          {this.props.current || <span>&nbsp;</span>}\n        </div>\n\n        {this.props.open && (\n          <div className=\"pvtDropdownMenu\">\n            {this.props.values.map(r => (\n              <div\n                key={r}\n                role=\"button\"\n                onClick={e => {\n                  e.stopPropagation();\n                  if (this.props.current === r) {\n                    this.props.toggle();\n                  } else {\n                    this.props.setValue(r);\n                  }\n                }}\n                className={\n                  'pvtDropdownValue ' +\n                  (r === this.props.current ? 'pvtDropdownActiveValue' : '')\n                }\n              >\n                {r}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nclass PivotTableUI extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      unusedOrder: [],\n      zIndices: {},\n      maxZIndex: 1000,\n      openDropdown: false,\n      attrValues: {},\n      materializedInput: [],\n    };\n  }\n\n  componentDidMount() {\n    this.materializeInput(this.props.data);\n  }\n\n  componentDidUpdate() {\n    this.materializeInput(this.props.data);\n  }\n\n  materializeInput(nextData) {\n    if (this.state.data === nextData) {\n      return;\n    }\n    const newState = {\n      data: nextData,\n      attrValues: {},\n      materializedInput: [],\n    };\n    let recordsProcessed = 0;\n    PivotData.forEachRecord(\n      newState.data,\n      this.props.derivedAttributes,\n      function(record) {\n        newState.materializedInput.push(record);\n        for (const attr of Object.keys(record)) {\n          if (!(attr in newState.attrValues)) {\n            newState.attrValues[attr] = {};\n            if (recordsProcessed > 0) {\n              newState.attrValues[attr].null = recordsProcessed;\n            }\n          }\n        }\n        for (const attr in newState.attrValues) {\n          const value = attr in record ? record[attr] : 'null';\n          if (!(value in newState.attrValues[attr])) {\n            newState.attrValues[attr][value] = 0;\n          }\n          newState.attrValues[attr][value]++;\n        }\n        recordsProcessed++;\n      }\n    );\n    this.setState(newState);\n  }\n\n  sendPropUpdate(command) {\n    this.props.onChange(update(this.props, command));\n  }\n\n  propUpdater(key) {\n    return value => this.sendPropUpdate({[key]: {$set: value}});\n  }\n\n  setValuesInFilter(attribute, values) {\n    this.sendPropUpdate({\n      valueFilter: {\n        [attribute]: {\n          $set: values.reduce((r, v) => {\n            r[v] = true;\n            return r;\n          }, {}),\n        },\n      },\n    });\n  }\n\n  addValuesToFilter(attribute, values) {\n    if (attribute in this.props.valueFilter) {\n      this.sendPropUpdate({\n        valueFilter: {\n          [attribute]: values.reduce((r, v) => {\n            r[v] = {$set: true};\n            return r;\n          }, {}),\n        },\n      });\n    } else {\n      this.setValuesInFilter(attribute, values);\n    }\n  }\n\n  removeValuesFromFilter(attribute, values) {\n    this.sendPropUpdate({\n      valueFilter: {[attribute]: {$unset: values}},\n    });\n  }\n\n  moveFilterBoxToTop(attribute) {\n    this.setState(\n      update(this.state, {\n        maxZIndex: {$set: this.state.maxZIndex + 1},\n        zIndices: {[attribute]: {$set: this.state.maxZIndex + 1}},\n      })\n    );\n  }\n\n  isOpen(dropdown) {\n    return this.state.openDropdown === dropdown;\n  }\n\n  makeDnDCell(items, onChange, classes) {\n    return (\n      <Sortable\n        options={{\n          group: 'shared',\n          ghostClass: 'pvtPlaceholder',\n          filter: '.pvtFilterBox',\n          preventOnFilter: false,\n        }}\n        tag=\"td\"\n        className={classes}\n        onChange={onChange}\n      >\n        {items.map(x => (\n          <DraggableAttribute\n            name={x}\n            key={x}\n            attrValues={this.state.attrValues[x]}\n            valueFilter={this.props.valueFilter[x] || {}}\n            sorter={getSort(this.props.sorters, x)}\n            menuLimit={this.props.menuLimit}\n            setValuesInFilter={this.setValuesInFilter.bind(this)}\n            addValuesToFilter={this.addValuesToFilter.bind(this)}\n            moveFilterBoxToTop={this.moveFilterBoxToTop.bind(this)}\n            removeValuesFromFilter={this.removeValuesFromFilter.bind(this)}\n            zIndex={this.state.zIndices[x] || this.state.maxZIndex}\n          />\n        ))}\n      </Sortable>\n    );\n  }\n\n  render() {\n    const numValsAllowed =\n      this.props.aggregators[this.props.aggregatorName]([])().numInputs || 0;\n\n    const aggregatorCellOutlet = this.props.aggregators[\n      this.props.aggregatorName\n    ]([])().outlet;\n\n    const rendererName =\n      this.props.rendererName in this.props.renderers\n        ? this.props.rendererName\n        : Object.keys(this.props.renderers)[0];\n\n    const rendererCell = (\n      <td className=\"pvtRenderers\">\n        <Dropdown\n          current={rendererName}\n          values={Object.keys(this.props.renderers)}\n          open={this.isOpen('renderer')}\n          zIndex={this.isOpen('renderer') ? this.state.maxZIndex + 1 : 1}\n          toggle={() =>\n            this.setState({\n              openDropdown: this.isOpen('renderer') ? false : 'renderer',\n            })\n          }\n          setValue={this.propUpdater('rendererName')}\n        />\n      </td>\n    );\n\n    const sortIcons = {\n      key_a_to_z: {\n        rowSymbol: '↕',\n        colSymbol: '↔',\n        next: 'value_a_to_z',\n      },\n      value_a_to_z: {\n        rowSymbol: '↓',\n        colSymbol: '→',\n        next: 'value_z_to_a',\n      },\n      value_z_to_a: {rowSymbol: '↑', colSymbol: '←', next: 'key_a_to_z'},\n    };\n\n    const aggregatorCell = (\n      <td className=\"pvtVals\">\n        <Dropdown\n          current={this.props.aggregatorName}\n          values={Object.keys(this.props.aggregators)}\n          open={this.isOpen('aggregators')}\n          zIndex={this.isOpen('aggregators') ? this.state.maxZIndex + 1 : 1}\n          toggle={() =>\n            this.setState({\n              openDropdown: this.isOpen('aggregators') ? false : 'aggregators',\n            })\n          }\n          setValue={this.propUpdater('aggregatorName')}\n        />\n        <a\n          role=\"button\"\n          className=\"pvtRowOrder\"\n          onClick={() =>\n            this.propUpdater('rowOrder')(sortIcons[this.props.rowOrder].next)\n          }\n        >\n          {sortIcons[this.props.rowOrder].rowSymbol}\n        </a>\n        <a\n          role=\"button\"\n          className=\"pvtColOrder\"\n          onClick={() =>\n            this.propUpdater('colOrder')(sortIcons[this.props.colOrder].next)\n          }\n        >\n          {sortIcons[this.props.colOrder].colSymbol}\n        </a>\n        {numValsAllowed > 0 && <br />}\n        {new Array(numValsAllowed).fill().map((n, i) => [\n          <Dropdown\n            key={i}\n            current={this.props.vals[i]}\n            values={Object.keys(this.state.attrValues).filter(\n              e =>\n                !this.props.hiddenAttributes.includes(e) &&\n                !this.props.hiddenFromAggregators.includes(e)\n            )}\n            open={this.isOpen(`val${i}`)}\n            zIndex={this.isOpen(`val${i}`) ? this.state.maxZIndex + 1 : 1}\n            toggle={() =>\n              this.setState({\n                openDropdown: this.isOpen(`val${i}`) ? false : `val${i}`,\n              })\n            }\n            setValue={value =>\n              this.sendPropUpdate({\n                vals: {$splice: [[i, 1, value]]},\n              })\n            }\n          />,\n          i + 1 !== numValsAllowed ? <br key={`br${i}`} /> : null,\n        ])}\n        {aggregatorCellOutlet && aggregatorCellOutlet(this.props.data)}\n      </td>\n    );\n\n    const unusedAttrs = Object.keys(this.state.attrValues)\n      .filter(\n        e =>\n          !this.props.rows.includes(e) &&\n          !this.props.cols.includes(e) &&\n          !this.props.hiddenAttributes.includes(e) &&\n          !this.props.hiddenFromDragDrop.includes(e)\n      )\n      .sort(sortAs(this.state.unusedOrder));\n\n    const unusedLength = unusedAttrs.reduce((r, e) => r + e.length, 0);\n    const horizUnused = unusedLength < this.props.unusedOrientationCutoff;\n\n    const unusedAttrsCell = this.makeDnDCell(\n      unusedAttrs,\n      order => this.setState({unusedOrder: order}),\n      `pvtAxisContainer pvtUnused ${\n        horizUnused ? 'pvtHorizList' : 'pvtVertList'\n      }`\n    );\n\n    const colAttrs = this.props.cols.filter(\n      e =>\n        !this.props.hiddenAttributes.includes(e) &&\n        !this.props.hiddenFromDragDrop.includes(e)\n    );\n\n    const colAttrsCell = this.makeDnDCell(\n      colAttrs,\n      this.propUpdater('cols'),\n      'pvtAxisContainer pvtHorizList pvtCols'\n    );\n\n    const rowAttrs = this.props.rows.filter(\n      e =>\n        !this.props.hiddenAttributes.includes(e) &&\n        !this.props.hiddenFromDragDrop.includes(e)\n    );\n    const rowAttrsCell = this.makeDnDCell(\n      rowAttrs,\n      this.propUpdater('rows'),\n      'pvtAxisContainer pvtVertList pvtRows'\n    );\n    const outputCell = (\n      <td className=\"pvtOutput\">\n        <PivotTable\n          {...update(this.props, {\n            data: {$set: this.state.materializedInput},\n          })}\n        />\n      </td>\n    );\n\n    if (horizUnused) {\n      return (\n        <table className=\"pvtUi\">\n          <tbody onClick={() => this.setState({openDropdown: false})}>\n            <tr>\n              {rendererCell}\n              {unusedAttrsCell}\n            </tr>\n            <tr>\n              {aggregatorCell}\n              {colAttrsCell}\n            </tr>\n            <tr>\n              {rowAttrsCell}\n              {outputCell}\n            </tr>\n          </tbody>\n        </table>\n      );\n    }\n\n    return (\n      <table className=\"pvtUi\">\n        <tbody onClick={() => this.setState({openDropdown: false})}>\n          <tr>\n            {rendererCell}\n            {aggregatorCell}\n            {colAttrsCell}\n          </tr>\n          <tr>\n            {unusedAttrsCell}\n            {rowAttrsCell}\n            {outputCell}\n          </tr>\n        </tbody>\n      </table>\n    );\n  }\n}\n\nPivotTableUI.propTypes = Object.assign({}, PivotTable.propTypes, {\n  onChange: PropTypes.func.isRequired,\n  hiddenAttributes: PropTypes.arrayOf(PropTypes.string),\n  hiddenFromAggregators: PropTypes.arrayOf(PropTypes.string),\n  hiddenFromDragDrop: PropTypes.arrayOf(PropTypes.string),\n  unusedOrientationCutoff: PropTypes.number,\n  menuLimit: PropTypes.number,\n});\n\nPivotTableUI.defaultProps = Object.assign({}, PivotTable.defaultProps, {\n  hiddenAttributes: [],\n  hiddenFromAggregators: [],\n  hiddenFromDragDrop: [],\n  unusedOrientationCutoff: 85,\n  menuLimit: 500,\n});\n\nexport default PivotTableUI;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}